<ion-header>
  <ion-buttons slot="start">
    <ion-menu-button></ion-menu-button>
  </ion-buttons>
  <ion-toolbar>
    <ion-title>Administrador</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="admin-container">

    <ion-card>
      <ion-card-header>
        <ion-card-title>Agregar Producto</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <form (ngSubmit)="agregarProducto()">
          <ion-item>
            <ion-label position="floating">Nombre</ion-label>
            <ion-input [(ngModel)]="nuevoProducto.nombre" name="nombre" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Descripción</ion-label>
            <ion-input [(ngModel)]="nuevoProducto.descripcion" name="descripcion" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Precio</ion-label>
            <ion-input [(ngModel)]="nuevoProducto.precio" name="precio" type="number" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Imagen URL</ion-label>
            <ion-input [(ngModel)]="nuevoProducto.imagen" name="imagen" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Categoría</ion-label>
            <ion-input [(ngModel)]="nuevaCategoria" name="categoria" required></ion-input>
          </ion-item>
          <ion-button type="submit" expand="full">Agregar Producto</ion-button>
        </form>
      </ion-card-content>
    </ion-card>


    <ion-card *ngIf="productoEnEdicion">
      <ion-card-header>
        <ion-card-title>Modificar Producto</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <form (ngSubmit)="guardarProducto()">
          <ion-item>
            <ion-label position="floating">Nombre</ion-label>
            <ion-input [(ngModel)]="productoEnEdicion.nombre" name="nombre" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Descripción</ion-label>
            <ion-input [(ngModel)]="productoEnEdicion.descripcion" name="descripcion" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Precio</ion-label>
            <ion-input [(ngModel)]="productoEnEdicion.precio" name="precio" type="number" required></ion-input>
          </ion-item>
          <ion-item>
            <ion-label position="floating">Imagen URL</ion-label>
            <ion-input [(ngModel)]="productoEnEdicion.imagen" name="imagen" required></ion-input>
          </ion-item>
          <ion-button type="submit" expand="full">Guardar Cambios</ion-button>
        </form>
      </ion-card-content>
    </ion-card>


    <ion-card>
      <ion-card-header>
        <ion-card-title>Productos por Categoría</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let categoria of categorias">
          <h3>{{ categoria.nombre }}</h3>
          <ion-grid>
            <ion-row>
              <ion-col size="12" *ngFor="let producto of categoria.productos; let i = index">
                <ion-card>
                  <img [src]="producto.imagen" alt="{{ producto.nombre }}" />
                  <ion-card-header>
                    <ion-card-title>{{ producto.nombre }}</ion-card-title>
                  </ion-card-header>
                  <ion-card-content>
                    <p>{{ producto.descripcion }}</p>
                    <p><strong>Precio: ${{ producto.precio }}</strong></p>
                    <ion-button color="danger" (click)="eliminarProducto(categoria.nombre, i)">Eliminar</ion-button>
                    <ion-button (click)="seleccionarProducto(producto)">Modificar</ion-button>
                  </ion-card-content>
                </ion-card>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>